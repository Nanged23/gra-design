{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"all\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"folder-container\"\n};\nconst _hoisted_3 = {\n  class: \"thumbnail-grid\"\n};\nconst _hoisted_4 = [\"src\", \"alt\"];\nconst _hoisted_5 = {\n  class: \"book-grid\"\n};\nconst _hoisted_6 = {\n  class: \"card-content\"\n};\nconst _hoisted_7 = [\"src\"];\nconst _hoisted_8 = {\n  class: \"card-title\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => $options.get_message())\n  }, \" 获取 \"), $options.getBooksInFolder(_ctx.folder.bookIds).length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.getBooksInFolder(_ctx.folder.bookIds), (book, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: book.bookId,\n      class: _normalizeClass([_ctx.getGridPositionClass(index), \"grid-item\"])\n    }, [_createElementVNode(\"img\", {\n      src: book.cover,\n      alt: book.title\n    }, null, 8 /* PROPS */, _hoisted_4)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"h3\", null, _toDisplayString(_ctx.folder.name), 1 /* TEXT */), _cache[1] || (_cache[1] = _createElementVNode(\"hr\", null, null, -1 /* HOISTED */))])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.booksNotInFolders(), book => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: book.bookId,\n      class: \"card\"\n    }, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"img\", {\n      src: book.cover,\n      class: \"card-image\"\n    }, null, 8 /* PROPS */, _hoisted_7), _createElementVNode(\"div\", _hoisted_8, _toDisplayString($options.truncatedTitle(book.title)), 1 /* TEXT */)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","onClick","_cache","$event","$options","get_message","getBooksInFolder","_ctx","folder","bookIds","length","_hoisted_2","_hoisted_3","_Fragment","_renderList","book","index","bookId","_normalizeClass","getGridPositionClass","src","cover","alt","title","_hoisted_4","_toDisplayString","name","_createCommentVNode","_hoisted_5","booksNotInFolders","_hoisted_6","_hoisted_7","_hoisted_8","truncatedTitle"],"sources":["/Users/dongliwei/Desktop/文档/CQUPT 课程/毕业设计/Front-end/front-end/src/components/third-content/third_weread.vue"],"sourcesContent":["<style scoped>\n.all {\n    margin-left: 250px;\n}\n\n.book-grid {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 16px;\n    /* 卡片之间的间距 */\n    justify-content: flex-start;\n    /* 从左侧开始排列 */\n}\n\n.card {\n    box-sizing: border-box;\n    width: calc((100% - 4 * 16px) / 5);\n    /* 计算每个卡片的宽度，减去间距 */ \n    backdrop-filter: blur(6px);\n    justify-content: center; \n    border-radius: 17px;\n    text-align: center;\n    cursor: pointer;\n    transition: all 0.5s;\n    margin-bottom: 16px;\n    /* 垂直方向的间距 */\n}\n\n.card-content {\n    justify-content: center; \n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%; \n}\n\n.card-image {\n    border-radius: 17px;\n    object-fit: cover;\n    width: 128px; \n    height: 185px;\n    /* 可以根据需要调整 */\n}\n\n.card-title {\n    justify-content: center; \n    margin-top: 8px;\n    width: 100%;\n    word-wrap: break-word;\n    text-align: center;\n    padding: 0 5px; \n    height:60px;\n}\n\n.card:hover {\n     \n    transform: scale(1.05);\n}\n \n</style>\n\n<template>\n    <div class=\"all\">\n        <button @click=\"get_message()\">\n            获取\n        </button>\n        <div v-if=\"getBooksInFolder(folder.bookIds).length > 0\" class=\"folder-container\">\n    <div class=\"thumbnail-grid\">\n      <div\n        v-for=\"(book, index) in getBooksInFolder(folder.bookIds)\"\n        :key=\"book.bookId\"\n        :class=\"getGridPositionClass(index)\"\n        class=\"grid-item\"\n      >\n        <img :src=\"book.cover\" :alt=\"book.title\" />\n      </div>\n    </div>\n    <h3>{{ folder.name }}</h3>\n    <hr />\n  </div>\n  \n        <div class=\"book-grid\">\n            <div v-for=\"book in booksNotInFolders()\" :key=\"book.bookId\" class=\"card\">\n                <div class=\"card-content\">\n                    <img :src=\"book.cover\" class=\"card-image\">\n                    <div class=\"card-title\">{{ truncatedTitle(book.title) }}</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport Cookies from 'js-cookie';\nexport default {\n    mounted() {\n        Cookies.set('skey', 'nOX_gv0S', { expires: 7 });\n        Cookies.set('vid', '442726869', { expires: 7 });\n    },\n    data() {\n        return {\n            data: {}\n        }\n    },\n    computed: {\n        // 获取不在任何文件夹中的书籍\n\n    },\n    methods: {\n        get_message() {\n            let url = \"http://127.0.0.1:5000/weread/info\"\n            fetch(url, {\n                method: 'POST',\n                credentials: 'include' // 或者 POST 等其他请求方法，按需调整\n            }).then(response => response.json())\n                .then(jsonData => {\n                    this.data = jsonData\n                    console.log(this.data)\n                    this.booksNotInFolders()\n                })\n                .catch(error => console.error(\"获取用户信息时出现 bug \" + error));\n\n\n        },\n        // 获取某个文件夹中包含的书籍\n        getBooksInFolder(bookIds) {\n            return this.data.books.filter(book => bookIds.includes(book.bookId));\n        },\n        booksNotInFolders() {\n            return this.data?.books?.filter(book =>\n                !this.data.archive.some(folder => folder.bookIds.includes(book.bookId))\n            ) || [];\n        },\n        truncatedTitle(title) {\n            if(title.length>15)title=title.substring(0, 15) + '...'\n            return title;\n        }\n    },\n};\n</script>"],"mappings":";;EA8DSA,KAAK,EAAC;AAAK;;EA9DpBC,GAAA;EAkEgED,KAAK,EAAC;;;EAC7DA,KAAK,EAAC;AAAgB;mBAnE/B;;EAiFaA,KAAK,EAAC;AAAW;;EAETA,KAAK,EAAC;AAAc;mBAnFzC;;EAqFyBA,KAAK,EAAC;AAAY;;uBAvBvCE,mBAAA,CA2BM,OA3BNC,UA2BM,GA1BFC,mBAAA,CAES;IAFAC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,WAAW;KAAI,MAE/B,GACWD,QAAA,CAAAE,gBAAgB,CAACC,IAAA,CAAAC,MAAM,CAACC,OAAO,EAAEC,MAAM,Q,cAAlDZ,mBAAA,CAaA,OAbAa,UAaA,GAZJX,mBAAA,CASM,OATNY,UASM,I,kBARJd,mBAAA,CAOMe,SAAA,QA3EZC,WAAA,CAqEgCV,QAAA,CAAAE,gBAAgB,CAACC,IAAA,CAAAC,MAAM,CAACC,OAAO,GArE/D,CAqEgBM,IAAI,EAAEC,KAAK;yBADrBlB,mBAAA,CAOM;MALHD,GAAG,EAAEkB,IAAI,CAACE,MAAM;MAChBrB,KAAK,EAvEdsB,eAAA,EAuEgBX,IAAA,CAAAY,oBAAoB,CAACH,KAAK,GAC5B,WAAW;QAEjBhB,mBAAA,CAA2C;MAArCoB,GAAG,EAAEL,IAAI,CAACM,KAAK;MAAGC,GAAG,EAAEP,IAAI,CAACQ;4BA1E1CC,UAAA,E;oCA6EIxB,mBAAA,CAA0B,YAAAyB,gBAAA,CAAnBlB,IAAA,CAAAC,MAAM,CAACkB,IAAI,kB,0BAClB1B,mBAAA,CAAM,qC,KA9EV2B,mBAAA,gBAiFQ3B,mBAAA,CAOM,OAPN4B,UAOM,I,kBANF9B,mBAAA,CAKMe,SAAA,QAvFlBC,WAAA,CAkFgCV,QAAA,CAAAyB,iBAAiB,IAAzBd,IAAI;yBAAhBjB,mBAAA,CAKM;MALoCD,GAAG,EAAEkB,IAAI,CAACE,MAAM;MAAErB,KAAK,EAAC;QAC9DI,mBAAA,CAGM,OAHN8B,UAGM,GAFF9B,mBAAA,CAA0C;MAApCoB,GAAG,EAAEL,IAAI,CAACM,KAAK;MAAEzB,KAAK,EAAC;4BApFjDmC,UAAA,GAqFoB/B,mBAAA,CAA8D,OAA9DgC,UAA8D,EAAAP,gBAAA,CAAnCrB,QAAA,CAAA6B,cAAc,CAAClB,IAAI,CAACQ,KAAK,kB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}