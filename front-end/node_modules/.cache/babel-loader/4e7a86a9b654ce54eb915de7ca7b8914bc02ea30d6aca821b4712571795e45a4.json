{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"all\"\n};\nconst _hoisted_2 = {\n  class: \"book-grid\"\n};\nconst _hoisted_3 = {\n  class: \"card-content\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  class: \"card-title\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"folder-grid\"\n};\nconst _hoisted_7 = {\n  class: \"grid-container\"\n};\nconst _hoisted_8 = [\"src\", \"alt\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => $options.get_message())\n  }, \" 获取 \"), _createCommentVNode(\" 渲染文件 \"), _createElementVNode(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.booksNotInFolders(), book => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: book.bookId,\n      class: \"card\"\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n      src: book.cover,\n      class: \"card-image\"\n    }, null, 8 /* PROPS */, _hoisted_4), _createElementVNode(\"div\", _hoisted_5, _toDisplayString($options.truncatedTitle(book.title)), 1 /* TEXT */)])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" 渲染文件夹 \"), $data.folder && $options.getBooksInFolder($data.folder.bookIds).length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.getBooksInFolder($data.folder.bookIds).slice(0, 4), (book, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: book.bookId,\n      class: _normalizeClass(`grid-item grid-item-${index + 1}`)\n    }, [_createElementVNode(\"img\", {\n      src: book.cover,\n      alt: book.title,\n      class: \"book-cover\"\n    }, null, 8 /* PROPS */, _hoisted_8)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"h3\", null, _toDisplayString($data.folder.name), 1 /* TEXT */), _cache[1] || (_cache[1] = _createElementVNode(\"hr\", null, null, -1 /* HOISTED */))])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","onClick","_cache","$event","$options","get_message","_createCommentVNode","_hoisted_2","_Fragment","_renderList","booksNotInFolders","book","bookId","_hoisted_3","src","cover","_hoisted_4","_hoisted_5","_toDisplayString","truncatedTitle","title","$data","folder","getBooksInFolder","bookIds","length","_hoisted_6","_hoisted_7","slice","index","_normalizeClass","alt","_hoisted_8","name"],"sources":["/Users/dongliwei/Desktop/文档/CQUPT 课程/毕业设计/Front-end/front-end/src/components/third-content/third_weread.vue"],"sourcesContent":["<style scoped>\n.all {\n    margin-left: 250px;\n}\n.folder-grid {\n  width: 100%;\n}\n\n.grid-container {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: 1fr 1fr;\n  gap: 10px;\n  height: 300px; /* Adjust as needed */\n  width: 100%;\n}\n\n.grid-item {\n  overflow: hidden;\n}\n\n.book-cover {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n/* Optional: Add specific positioning if needed */\n.grid-item-1 { grid-area: 1 / 1 / 2 / 2; } /* Top Left */\n.grid-item-2 { grid-area: 1 / 2 / 2 / 3; } /* Top Right */\n.grid-item-3 { grid-area: 2 / 1 / 3 / 2; } /* Bottom Left */\n.grid-item-4 { grid-area: 2 / 2 / 3 / 3; } /* Bottom Right */\n.folder-container {\n    padding: 16px;\n}\n\n.thumbnail-grid {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    /* 两列布局 */\n    grid-template-rows: 1fr 1fr;\n    /* 两行布局 */\n    gap: 8px;\n    /* 图片之间的间距 */\n    width: 200px;\n    /* 缩略图的总宽度 */\n    height: 200px;\n    /* 缩略图的总高度 */\n    position: relative;\n    overflow: hidden;\n}\n\n.grid-item {\n    width: 100%;\n    height: 100%;\n    position: relative;\n}\n\n.grid-item img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.grid-item.top-left {\n    grid-area: 1 / 1;\n    /* 第一行第一列 */\n}\n\n.grid-item.top-right {\n    grid-area: 1 / 2;\n    /* 第一行第二列 */\n}\n\n.grid-item.bottom-left {\n    grid-area: 2 / 1;\n    /* 第二行第一列 */\n}\n\n.grid-item.bottom-right {\n    grid-area: 2 / 2;\n    /* 第二行第二列 */\n}\n\n.book-grid {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 16px;\n    /* 卡片之间的间距 */\n    justify-content: flex-start;\n    /* 从左侧开始排列 */\n}\n\n.card {\n    box-sizing: border-box;\n    width: calc((100% - 4 * 16px) / 5);\n    /* 计算每个卡片的宽度，减去间距 */\n    backdrop-filter: blur(6px);\n    justify-content: center;\n    border-radius: 17px;\n    text-align: center;\n    cursor: pointer;\n    transition: all 0.5s;\n    margin-bottom: 16px;\n    /* 垂直方向的间距 */\n}\n\n.card-content {\n    justify-content: center;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n}\n\n.card-image {\n    border-radius: 17px;\n    object-fit: cover;\n    width: 128px;\n    height: 185px;\n    /* 可以根据需要调整 */\n}\n\n.card-title {\n    justify-content: center;\n    margin-top: 8px;\n    width: 100%;\n    word-wrap: break-word;\n    text-align: center;\n    padding: 0 5px;\n    height: 60px;\n}\n\n.card:hover {\n\n    transform: scale(1.05);\n}\n</style>\n<template>\n    <div class=\"all\">\n        <button @click=\"get_message()\">\n            获取\n        </button>\n\n        <!-- 渲染文件 -->\n        <div class=\"book-grid\">\n            <div v-for=\"book in booksNotInFolders()\" :key=\"book.bookId\" class=\"card\">\n                <div class=\"card-content\">\n                    <img :src=\"book.cover\" class=\"card-image\">\n                    <div class=\"card-title\">{{ truncatedTitle(book.title) }}</div>\n                </div>\n            </div>\n        </div>\n\n        <!-- 渲染文件夹 -->\n        <div class=\"folder-grid\" v-if=\"folder && getBooksInFolder(folder.bookIds).length > 0\">\n            <div class=\"grid-container\">\n                <div v-for=\"(book, index) in getBooksInFolder(folder.bookIds).slice(0, 4)\" :key=\"book.bookId\"\n                    :class=\"`grid-item grid-item-${index + 1}`\">\n                    <img :src=\"book.cover\" :alt=\"book.title\" class=\"book-cover\" />\n                </div>\n            </div>\n            <h3>{{ folder.name }}</h3>\n            <hr>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Cookies from 'js-cookie';\nexport default {\n    mounted() {\n        Cookies.set('skey', 'nOX_gv0S', { expires: 7 });\n        Cookies.set('vid', '442726869', { expires: 7 });\n    },\n    data() {\n        return {\n            data: {},\n            folder: null // Ensure folder is initialized properly\n        }\n    },\n    computed: {},\n    methods: {\n        getGridPositionClass(index) {\n            // 根据索引返回对应的区域类名\n            const positions = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];\n            return positions[index % 4]; // 循环分配\n        },\n        get_message() {\n        let url = \"http://127.0.0.1:5000/weread/info\"\n        fetch(url, {\n            method: 'POST',\n            credentials: 'include'\n        }).then(response => response.json())\n            .then(jsonData => {\n                this.data = jsonData\n                console.log('Full Data:', jsonData) // Log full data\n                console.log('Folder:', jsonData.folder) // Log folder data\n                console.log('Books:', jsonData.books) // Log books\n                console.log('Archive:', jsonData.archive) // Log archive\n\n                this.folder = jsonData.folder;\n                this.$nextTick(() => {\n                    const foldersInBooks = this.booksNotInFolders();\n                    console.log('Books Not in Folders:', foldersInBooks);\n                    const booksInFolder = this.getBooksInFolder(this.folder?.bookIds);\n                    console.log('Books in Folder:', booksInFolder);\n                });\n            })\n            .catch(error => console.error(\"获取用户信息时出现 bug \" + error));\n    },\n        // 获取某个文件夹中包含的书籍\n        getBooksInFolder(bookIds) {\n    if (!bookIds || !this.data?.books) return [];\n    return this.data.books.filter(book => \n        bookIds.includes(book.bookId)\n    );\n},\nbooksNotInFolders() {\n    if (!this.data?.books || !this.data?.archive) return [];\n    return this.data.books.filter(book => \n        !this.data.archive.some(folder => \n            folder.bookIds.includes(book.bookId)\n        )\n    );\n},\n        truncatedTitle(title) {\n            if (title.length > 15) title = title.substring(0, 15) + '...'\n            return title;\n        }\n    },\n};\n</script>\n"],"mappings":";;EA2ISA,KAAK,EAAC;AAAK;;EAMPA,KAAK,EAAC;AAAW;;EAETA,KAAK,EAAC;AAAc;mBAnJzC;;EAqJyBA,KAAK,EAAC;AAAY;;EArJ3CC,GAAA;EA2JaD,KAAK,EAAC;;;EACFA,KAAK,EAAC;AAAgB;mBA5JvC;;uBA2IIE,mBAAA,CA0BM,OA1BNC,UA0BM,GAzBFC,mBAAA,CAES;IAFAC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,WAAW;KAAI,MAE/B,GAEAC,mBAAA,UAAa,EACbN,mBAAA,CAOM,OAPNO,UAOM,I,kBANFT,mBAAA,CAKMU,SAAA,QAvJlBC,WAAA,CAkJgCL,QAAA,CAAAM,iBAAiB,IAAzBC,IAAI;yBAAhBb,mBAAA,CAKM;MALoCD,GAAG,EAAEc,IAAI,CAACC,MAAM;MAAEhB,KAAK,EAAC;QAC9DI,mBAAA,CAGM,OAHNa,UAGM,GAFFb,mBAAA,CAA0C;MAApCc,GAAG,EAAEH,IAAI,CAACI,KAAK;MAAEnB,KAAK,EAAC;4BApJjDoB,UAAA,GAqJoBhB,mBAAA,CAA8D,OAA9DiB,UAA8D,EAAAC,gBAAA,CAAnCd,QAAA,CAAAe,cAAc,CAACR,IAAI,CAACS,KAAK,kB;oCAKhEd,mBAAA,WAAc,EACiBe,KAAA,CAAAC,MAAM,IAAIlB,QAAA,CAAAmB,gBAAgB,CAACF,KAAA,CAAAC,MAAM,CAACE,OAAO,EAAEC,MAAM,Q,cAAhF3B,mBAAA,CASM,OATN4B,UASM,GARF1B,mBAAA,CAKM,OALN2B,UAKM,I,kBAJF7B,mBAAA,CAGMU,SAAA,QAhKtBC,WAAA,CA6J6CL,QAAA,CAAAmB,gBAAgB,CAACF,KAAA,CAAAC,MAAM,CAACE,OAAO,EAAEI,KAAK,QA7JnF,CA6J6BjB,IAAI,EAAEkB,KAAK;yBAAxB/B,mBAAA,CAGM;MAHsED,GAAG,EAAEc,IAAI,CAACC,MAAM;MACvFhB,KAAK,EA9J1BkC,eAAA,wBA8JmDD,KAAK;QACpC7B,mBAAA,CAA8D;MAAxDc,GAAG,EAAEH,IAAI,CAACI,KAAK;MAAGgB,GAAG,EAAEpB,IAAI,CAACS,KAAK;MAAExB,KAAK,EAAC;4BA/JnEoC,UAAA,E;oCAkKYhC,mBAAA,CAA0B,YAAAkB,gBAAA,CAAnBG,KAAA,CAAAC,MAAM,CAACW,IAAI,kB,0BAClBjC,mBAAA,CAAI,qC,KAnKhBM,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}