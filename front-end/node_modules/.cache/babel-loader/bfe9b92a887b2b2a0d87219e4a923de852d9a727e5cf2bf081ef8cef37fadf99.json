{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"all\"\n};\nconst _hoisted_2 = {\n  class: \"folder\"\n};\nconst _hoisted_3 = {\n  key: 0\n};\nconst _hoisted_4 = {\n  class: \"book-grid\"\n};\nconst _hoisted_5 = {\n  class: \"card-content\"\n};\nconst _hoisted_6 = [\"src\"];\nconst _hoisted_7 = {\n  class: \"card-title\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => $options.get_message())\n  }, \" 获取 \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(this.data.archive, folder => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: folder.name\n    }, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" 渲染文件夹封面和书籍 \"), $options.getBooksInFolder(folder.bookIds).length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.getBooksInFolder(folder.bookIds), book => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: book.bookId\n      }, _toDisplayString(book.title), 1 /* TEXT */);\n    }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"h3\", null, _toDisplayString(folder.name), 1 /* TEXT */), _cache[1] || (_cache[1] = _createElementVNode(\"hr\", null, null, -1 /* HOISTED */))])]);\n  }), 128 /* KEYED_FRAGMENT */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.booksNotInFolders(), book => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: book.bookId,\n      class: \"book\"\n    }, [_createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.booksNotInFolders(), book => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: book.bookId,\n        class: \"card\"\n      }, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"img\", {\n        src: book.cover,\n        class: \"card-image\"\n      }, null, 8 /* PROPS */, _hoisted_6), _createElementVNode(\"div\", _hoisted_7, _toDisplayString($options.truncatedTitle(book.title)), 1 /* TEXT */)])]);\n    }), 128 /* KEYED_FRAGMENT */))])]);\n  }), 128 /* KEYED_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","onClick","_cache","$event","$options","get_message","_Fragment","_renderList","data","archive","folder","name","_hoisted_2","_createCommentVNode","getBooksInFolder","bookIds","length","_hoisted_3","book","bookId","title","_toDisplayString","booksNotInFolders","_hoisted_4","_hoisted_5","src","cover","_hoisted_6","_hoisted_7","truncatedTitle"],"sources":["/Users/dongliwei/Desktop/文档/CQUPT 课程/毕业设计/Front-end/front-end/src/components/third-content/third_weread.vue"],"sourcesContent":["<style scoped>\n.all {\n    margin-left: 250px;\n}\n.card {\n    box-sizing: border-box;\n    width: 126px;\n    background: rgba(217, 217, 217, 0.58);\n    box-shadow: 12px 17px 51px rgba(0, 0, 0, 0.22);\n    backdrop-filter: blur(6px);\n    border-radius: 17px;\n    text-align: center;\n    cursor: pointer;\n    transition: all 0.5s;\n    display: flex;\n    align-items: center;\n    justify-content: center; \n    color: black;\n}\n\n.card-content {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n}\n\n.card-image {\n    border-radius: 17px;\n    object-fit: cover;\n    width: 100%;\n    max-height: 180px; /* 可以根据需要调整 */\n}\n\n.card-title {\n    margin-top: 8px;\n    width: 100%;\n    word-wrap: break-word;\n    text-align: center;\n    padding: 0 5px;\n    box-sizing: border-box;\n}\n\n.card:hover {\n    border: 1px solid black;\n    transform: scale(1.05);\n}\n\n.card:active {\n    transform: scale(0.95) rotateZ(1.7deg);\n}\n</style>\n\n<template>\n    <div class=\"all\">\n        <button @click=\"get_message()\">\n            获取\n        </button>\n        <div v-for=\"folder in this.data.archive\" :key=\"folder.name\">\n            <div class=\"folder\">\n\n                <!-- 渲染文件夹封面和书籍 -->\n                <div v-if=\"getBooksInFolder(folder.bookIds).length > 0\">\n\n                    <ul>\n                        <li v-for=\"book in getBooksInFolder(folder.bookIds)\" :key=\"book.bookId\">{{ book.title }}</li>\n                    </ul>\n                </div>\n                <h3>{{ folder.name }}</h3>\n                <hr>\n            </div>\n        </div>\n        <div v-for=\"book in booksNotInFolders()\" :key=\"book.bookId\" class=\"book\">\n\n            <div class=\"book-grid\">\n    <div v-for=\"book in booksNotInFolders()\" :key=\"book.bookId\" class=\"card\">\n        <div class=\"card-content\">\n            <img :src=\"book.cover\" class=\"card-image\">\n            <div class=\"card-title\">{{ truncatedTitle(book.title) }}</div>\n        </div>\n    </div>\n</div>\n\n\n        </div>\n    </div>\n</template>\n<script>\nimport Cookies from 'js-cookie';\nexport default {\n    mounted() {\n        Cookies.set('skey', 'nOX_gv0S', { expires: 7 });\n        Cookies.set('vid', '442726869', { expires: 7 });\n    },\n    data() {\n        return {\n            data: {}\n        }\n    },\n    computed: {\n        // 获取不在任何文件夹中的书籍\n\n    },\n    methods: {\n        get_message() {\n            let url = \"http://127.0.0.1:5000/weread/info\"\n            fetch(url, {\n                method: 'POST',\n                credentials: 'include' // 或者 POST 等其他请求方法，按需调整\n            }).then(response => response.json())\n                .then(jsonData => {\n                    this.data = jsonData\n                    console.log(this.data)\n                    this.booksNotInFolders()\n                })\n                .catch(error => console.error(\"获取用户信息时出现 bug \" + error));\n\n\n        },\n        // 获取某个文件夹中包含的书籍\n        getBooksInFolder(bookIds) {\n            return this.data.books.filter(book => bookIds.includes(book.bookId));\n        },\n        booksNotInFolders() {\n            return this.data?.books?.filter(book =>\n                !this.data.archive.some(folder => folder.bookIds.includes(book.bookId))\n            ) || [];\n        },\n        truncatedTitle(title) {\n            return title.length > 10 ? title.substring(0, 5) + '...' : title;\n        }\n    },\n};\n</script>"],"mappings":";;EAsDSA,KAAK,EAAC;AAAK;;EAKHA,KAAK,EAAC;AAAQ;;EA3D/BC,GAAA;AAAA;;EA0EiBD,KAAK,EAAC;AAAW;;EAErBA,KAAK,EAAC;AAAc;mBA5EjC;;EA8EiBA,KAAK,EAAC;AAAY;;uBAxB/BE,mBAAA,CA+BM,OA/BNC,UA+BM,GA9BFC,mBAAA,CAES;IAFAC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,WAAW;KAAI,MAE/B,I,kBACAP,mBAAA,CAaMQ,SAAA,QAvEdC,WAAA,MA0DmCC,IAAI,CAACC,OAAO,EAA3BC,MAAM;yBAAlBZ,mBAAA,CAaM;MAboCD,GAAG,EAAEa,MAAM,CAACC;QAClDX,mBAAA,CAWM,OAXNY,UAWM,GATFC,mBAAA,gBAAmB,EACRT,QAAA,CAAAU,gBAAgB,CAACJ,MAAM,CAACK,OAAO,EAAEC,MAAM,Q,cAAlDlB,mBAAA,CAKM,OAnEtBmB,UAAA,GAgEoBjB,mBAAA,CAEK,c,kBADDF,mBAAA,CAA6FQ,SAAA,QAjErHC,WAAA,CAiE2CH,QAAA,CAAAU,gBAAgB,CAACJ,MAAM,CAACK,OAAO,GAAvCG,IAAI;2BAAfpB,mBAAA,CAA6F;QAAvCD,GAAG,EAAEqB,IAAI,CAACC;0BAAWD,IAAI,CAACE,KAAK;0CAjE7GP,mBAAA,gBAoEgBb,mBAAA,CAA0B,YAAAqB,gBAAA,CAAnBX,MAAM,CAACC,IAAI,kB,0BAClBX,mBAAA,CAAI,qC;qDAGZF,mBAAA,CAYMQ,SAAA,QApFdC,WAAA,CAwE4BH,QAAA,CAAAkB,iBAAiB,IAAzBJ,IAAI;yBAAhBpB,mBAAA,CAYM;MAZoCD,GAAG,EAAEqB,IAAI,CAACC,MAAM;MAAEvB,KAAK,EAAC;QAE9DI,mBAAA,CAON,OAPMuB,UAON,I,kBANFzB,mBAAA,CAKMQ,SAAA,QAhFVC,WAAA,CA2EwBH,QAAA,CAAAkB,iBAAiB,IAAzBJ,IAAI;2BAAhBpB,mBAAA,CAKM;QALoCD,GAAG,EAAEqB,IAAI,CAACC,MAAM;QAAEvB,KAAK,EAAC;UAC9DI,mBAAA,CAGM,OAHNwB,UAGM,GAFFxB,mBAAA,CAA0C;QAApCyB,GAAG,EAAEP,IAAI,CAACQ,KAAK;QAAE9B,KAAK,EAAC;8BA7EzC+B,UAAA,GA8EY3B,mBAAA,CAA8D,OAA9D4B,UAA8D,EAAAP,gBAAA,CAAnCjB,QAAA,CAAAyB,cAAc,CAACX,IAAI,CAACE,KAAK,kB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}